--
-- Copyright (c) 1988, 2004, Oracle Corporation.  All Rights Reserved.
--
-- NAME
--   glogin.sql
--
-- DESCRIPTION
--   SQL*Plus global login "site profile" file
--
--   Add any SQL*Plus commands here that are to be executed when a
--   user starts SQL*Plus, or uses the SQL*Plus CONNECT command
--
-- USAGE
--   This script is automatically run
--
set echo on
-- Used by Trusted Oracle
COLUMN ROWLABEL FORMAT A15

-- Used for the SHOW ERRORS command
COLUMN LINE/COL FORMAT A8
COLUMN ERROR    FORMAT A65  WORD_WRAPPED

-- Used for the SHOW SGA command
COLUMN name_col_plus_show_sga FORMAT a24
COLUMN units_col_plus_show_sga FORMAT a15
-- Defaults for SHOW PARAMETERS
COLUMN name_col_plus_show_param FORMAT a36 HEADING NAME
COLUMN value_col_plus_show_param FORMAT a30 HEADING VALUE

-- Defaults for SHOW RECYCLEBIN
COLUMN origname_plus_show_recyc   FORMAT a16 HEADING 'ORIGINAL NAME'
COLUMN objectname_plus_show_recyc FORMAT a30 HEADING 'RECYCLEBIN NAME'
COLUMN objtype_plus_show_recyc    FORMAT a12 HEADING 'OBJECT TYPE'
COLUMN droptime_plus_show_recyc   FORMAT a19 HEADING 'DROP TIME'

-- Defaults for SET AUTOTRACE EXPLAIN report
-- These column definitions are only used when SQL*Plus
-- is connected to Oracle 9.2 or earlier.
COLUMN id_plus_exp FORMAT 990 HEADING i
COLUMN parent_id_plus_exp FORMAT 990 HEADING p
COLUMN plan_plus_exp FORMAT a60
COLUMN object_node_plus_exp FORMAT a8
COLUMN other_tag_plus_exp FORMAT a29
COLUMN other_plus_exp FORMAT a44

-- Default for XQUERY
COLUMN result_plus_xquery HEADING 'Result Sequence'


-- Custom
set feed off
set hea off
set lin 155
set long 1000000000
set longc 60000
set pages 40000
set serverout on size unlimited
set term off
set time on
set timi off
set ver off
-- Columns
col file_name format a60
col member format a41
col tablespace_name format a20
col db_link format a20
col host format a20

--

col "_myprompt" new_value myprompt noprint
col "_mytitle" new_value mytitle noprint
col "_user" new_value _USER noprint
col "_privilege" new_value _PRIVILEGE noprint
col "_connect_identifier" new_value _CONNECT_IDENTIFIER noprint
col "_o_release" new_value _O_RELEASE noprint

-- default to null
select 'x' "_user", 'x' "_privilege", 'x' "_connect_identifier", 'x' "_o_release" from dual where null=null;

select nvl('&_user', user) "_user", nvl('&_privilege', decode(user,'SYS','AS SYSDBA','PUBLIC','AS SYSOPER')) "_privilege", nvl('&_o_release','0') "_o_release" from dual;
select nvl('&_connect_identifier',name) "_connect_identifier" from v$database;
select nvl('&_connect_identifier',substr(global_name, 1, instr(global_name||'.','.'))) "_connect_identifier" from global_name;

-- coloring
def _sysdba=""
def _sysoper=""
def _normal=""
def _reset=""

select
decode('&_PRIVILEGE', 'AS SYSDBA', '&_SYSDBA', 'AS SYSOPER', '&_SYSOPER', '&_NORMAL')||
substr('&_USER'||
decode('&_CONNECT_IDENTIFIER', null, null, '@&_CONNECT_IDENTIFIER')||
decode('&_PRIVILEGE', null, null, ' &_PRIVILEGE')||
decode(&_O_RELEASE, null, null,
'/'||
trunc(&_O_RELEASE/100000000) || '.' ||
mod(trunc(&_O_RELEASE/1000000),100) || '.' ||
mod(trunc(&_O_RELEASE/10000),100) || '.' ||
mod(trunc(&_O_RELEASE/100),100)
),
1, 33)||
'&_RESET'||
'> ' "_myprompt"
from dual;

set sqlprompt "&myprompt."

select
'SQL*Plus &_USER'||
decode('&_CONNECT_IDENTIFIER', null, null, '@&_CONNECT_IDENTIFIER')||
rtrim(' &_PRIVILEGE')||
decode(&_O_RELEASE, null, null,
'/'||
trunc(&_O_RELEASE/100000000) || '.' ||
mod(trunc(&_O_RELEASE/1000000),100) || '.' ||
mod(trunc(&_O_RELEASE/10000),100) || '.' ||
mod(trunc(&_O_RELEASE/100),100)
) "_mytitle"
from dual;

ho title &mytitle

set hea on
set ver on
set feed 15
set term on
set timi on